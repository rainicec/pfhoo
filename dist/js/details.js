"use strict";require(["config"],function(){require(["jquery","common"],function(e,n){e("#head").load("head",function(){require(["head"],function(){var n=!0;e("#hide").click(function(){n=(n?(e("#autinf").css("display","block"),e(this).attr("src","../css/img/trusted-web3_01.png")):(e("#autinf").css("display","none"),e(this).attr("src","../css/img/trusted-web4_01.png")),!n)}),setTimeout(function(){e("#autinf").css("display","none"),e("#hide").attr("src","../css/img/trusted-web4_01.png")},3e3),getCookie("user")?(e("#topnav .username").html(getCookie("user")),e("#topnav .loginout").html("退出"),e("#topnav .regsj").html("我的数据包"),e("#topnav .mesg").html("我的私信"),e("#topnav").on("click",".loginout",function(){removeCookie("user"),location.href="index.html"})):(e("#topnav").on("click",".loginout",function(){location.href="login.html"}),e("#topnav").on("click",".regsj",function(){location.href="register.html"}))})}),e("#side").load("sidebar",function(){require(["sidebar"],function(){e("#side").on("click",".cart",function(){location.href="cart.html"})})}),e("#bottom_lam").load("bottom_con",function(){require(["bottom_con"])}),e("#foot").load("foot",function(){}),e("#total_nav").on("mouseenter",".classification",function(){e("#com_box").css("display","block"),e("#total_nav .classification").css({background:" #bc338b",color:"#fff"}),e("#total_nav .classification li:eq(0)").css("background-position"," 0 -87px")}),e("#total_nav").on("mouseleave",".classification",function(){e("#com_box").css("display","none"),e("#total_nav .classification").css({background:"#fff",color:"#bc338b"}),e("#total_nav .classification li:eq(0)").css("background-position"," 0 -59px")}),e("#com_box").mouseenter(function(){e(this).css("display","block"),e("#total_nav .classification").css({background:" #bc338b",color:"#fff"}),e("#total_nav .classification li:eq(0)").css("background-position"," 0 -87px")}),e("#com_box").mouseleave(function(){e(this).css("display","none"),e("#total_nav .classification").css({background:"#fff",color:"#bc338b"}),e("#total_nav .classification li:eq(0)").css("background-position"," 0 -59px")}),e("#com_box").on("mouseenter",".fashion_accessories",function(){e("#com_box .com_main1").css("display","block"),e(this).css("background","#fff"),e(this).css("color","#183b8c")}),e("#com_box").on("mouseleave",".fashion_accessories",function(){e("#com_box .com_main1").css("display","none"),e(this).css("background","#183b8c"),e(this).css("color","#fff")}),e("#com_box").on("mouseenter",".pure_silver_jewelry",function(){e("#com_box .com_main2").css("display","block"),e(this).css("background","#fff"),e(this).css("color","#183b8c")}),e("#com_box").on("mouseleave",".pure_silver_jewelry",function(){e("#com_box .com_main2").css("display","none"),e(this).css("background","#183b8c"),e(this).css("color","#fff")}),e("#com_box").on("mouseenter",".marketable_platform",function(){e("#com_box .com_main3").css("display","block"),e(this).css("background","#fff"),e(this).css("color","#183b8c")}),e("#com_box").on("mouseleave",".marketable_platform",function(){e("#com_box .com_main3").css("display","none"),e(this).css("background","#183b8c"),e(this).css("color","#fff")}),e("#com_box").on("mouseover",".com_class_main",function(){e(this).css("display","block")}),e("#com_box").on("mouseout",".com_class_main",function(){e(this).css("display","none")});var s=decodeURI(location.search).slice(1),f=strToObj(s);new Promise(function(s){e.ajax({type:"get",url:"../api/details.php",data:"gid="+f.gid,success:function(n){s(n)}})}).then(function(n){var s=JSON.parse(n),i=s[0].imgpath.split("&"),a='<div class="left">\n                                <div class="img">\n                                    <img src="'+i[0]+'" alt="">\n                                    <div class="lay"></div>\n                                </div>\n                                <div class="bigimg">\n                                    <img src="'+i[0]+'" alt="">\n                                </div>\n                                <ul class="xy clearfix">\n                                    <li>\n                                        <img src="'+i[0]+'" alt="">\n                                    </li>\n                                    <li>\n                                        <img src="'+i[1]+'" alt="">\n                                    </li>\n                                    <li>\n                                        <img src="'+i[2]+'" alt="">\n                                    </li>\n                                    <li>\n                                        <img src="'+i[3]+'" alt="">\n                                    </li>\n                                </ul>\n                                <ul class="keep clearfix">\n                                    <li>&我要专属图</li>\n                                    <li>\n                                        <span></span>收藏货品</li>\n                                    <li>\n                                        <span></span>告诉我们更低的价格</li>\n                                </ul>\n                                <div class="btnbox">\n                                    <input type="button" value="数据包">\n                                    <input type="button" value="专属定制">\n                                </div>\n                            </div>\n                            <div class="right">\n                                <h2>'+s[0].name+'</h2>\n                                <ul class="shopname clearfix">\n                                    <li>spu:'+s[0].spu+"</li>\n                                    <li>产业带："+s[0].origin+"</li>\n                                    <li>店铺名称："+s[0].shopname+'</li>\n                                </ul>\n                                <ul class="pri">\n                                    <li>\n                                        <span>批发: ￥</span>\n                                        <span class="price">'+s[0].price+'.00</span>\n                                    </li>\n                                    <li>\n                                        ≥1件\n                                    </li>\n                                </ul>\n                                <ul class="sit">\n                                    <li>\n                                        <span>款式</span>\n                                        <span>金属颜色/戒指大小</span>\n                                    </li>\n                                    <li>\n                                        <img src="'+i[0]+'" alt="">\n                                        <span>镀银/8</span>\n                                        <span>'+s[0].spu+"</span>\n                                        <span>$"+s[0].price+"</span>\n                                        <span>现货销售(库存"+s[0].stock+')</span>\n                                        <input type="button" class="reduce" value="-">\n                                        <input type="text" class="buynum" value="0">\n                                        <input type="button" class="plus" value="+">\n                                    </li>\n                                </ul>\n                                <div class="buybox">\n                                    <ul>\n                                        <li>共\n                                            <span>0</span>&nbsp;件</li>\n                                        <li>￥\n                                            <span>0</span>\n                                        </li>\n                                    </ul>\n                                    <input type="button" value="加入数据包" class="inbag">\n                                    <input type="button" value="加入进货单" class="incart">\n                                </div>\n                                <dl class="guarantee clearfix">\n                                    <dt>交易保障:</dt>\n                                    <dd>\n                                        <img src="../css/img/details1.png" alt=""> 15天退换</dd>\n                                    <dd>\n                                        <img src="../css/img/details2.png" alt="">正品保障</dd>\n                                    <dd>\n                                        <img src="../css/img/details3.png" alt="">闪电发货</dd>\n                                    <dd>\n                                        <img src="../css/img/details4.png" alt="">安全购物</dd>\n                                </dl>\n                                <dl class="payment clearfix">\n                                    <dt>支付方式:</dt>\n                                    <dd>\n                                        <img src="../css/img/details5.png" alt="">支付宝</dd>\n                                    <dd>\n                                        <img src="../css/img/details6.png" alt="">微信支付</dd>\n                                    <dd>\n                                        <img src="../css/img/details7.png" alt="">信用支付</dd>\n                                </dl>\n                            </div>';function t(){e("#aff .xy li").each(function(n,s){e(s).find("img").attr("src")==e("#aff .left .img img").attr("src")&&(e(s).css("border","2px solid #bc338b"),e(s).siblings().css("border","none"))})}e("#aff").html(a),t(),e("#aff").on("mouseenter",".xy img",function(){e("#aff .left .img img").attr("src",e(this).attr("src")),e("#aff .left .bigimg img").attr("src",e(this).attr("src")),t()});var o=0;e("#aff").on("click",".reduce",function(){--o<0&&(o=0),e("#aff .buynum").val(o),l()}),e("#aff").on("click",".plus",function(){++o>s[0].stock&&(o=s[0].stock),e("#aff .buynum").val(o),l()});var c=/^[0-9]*$/;function l(){e("#aff .buybox ul li:eq(0) span").text(o),e("#aff .buybox ul li:eq(1) span").text(o*s[0].price)}e("#aff").on("keyup",".buynum",function(){c.test(e("#aff .buynum").val())&&(o=1*e("#aff .buynum").val()>s[0].stock?s[0].stock:e("#aff .buynum").val()),e("#aff .buynum").val(o),l()}),e("#aff").on("click",".incart",function(){0==o?(e("#tips").css("display","block"),e("#tips").text("购买数量最少为1"),setTimeout(function(){e("#tips").css("display","none")},2e3)):getCookie("user")?e.ajax({type:"get",url:"../api/incart.php",data:{gid:f.gid,user:getCookie("user"),num:o},success:function(n){"ok"==n&&(e("#tips").css("display","block"),e("#tips").text("添加成功"),setTimeout(function(){e("#tips").css("display","none")},2e3))}}):(e("#tips").css("display","block"),e("#tips").text("请先登录"),setTimeout(function(){e("#tips").css("display","none")},2e3))}),e("#aff").on("mouseenter",".img",function(){e("#aff .bigimg").css("display","block"),e("#aff .lay").css("display","block")}),e("#aff").on("mouseleave",".img",function(){e("#aff .bigimg").css("display","none"),e("#aff .lay").css("display","none")}),e("#aff").on("mousemove",".img",function(n){var s=n.pageX-e("#aff .img").offset().left-e("#aff .lay").width()/2,i=n.pageY-e("#aff .img").offset().top-e("#aff .lay").height()/2;e("#aff .lay").css({top:i,left:s}),e("#aff .bigimg img").css({"margin-left":1.6*-s,"margin-top":1.6*-i}),s<0&&(e("#aff .lay").css("left",0),e("#aff .bigimg img").css("margin-left",0)),s>e("#aff .img").width()-e("#aff .lay").width()&&(e("#aff .lay").css("left",e("#aff .img").width()-e("#aff .lay").width()),e("#aff .bigimg img").css("margin-left",-e("#aff .bigimg img").width()/2)),i<0&&(e("#aff .lay").css("top",0),e("#aff .bigimg img").css("margin-top",0)),i>e("#aff .img").height()-e("#aff .lay").height()&&(e("#aff .lay").css("top",e("#aff .img").height()-e("#aff .lay").height()),e("#aff .bigimg img").css("margin-top",-e("#aff .bigimg img").height()/2))})}),e("#optcard").on("click","span",function(){e("#optcard .content").each(function(n,s){e(s).css("display","none")}),e("#optcard .content").eq(e(this).index()).css("display","block")})})});